container:
  image: google/dart

task:
  pub_cache:
    folder: $HOME/.pub-cache
    fingerprint_script: sha256sum pubspec.yaml
    populate_script: pub get

  resolve_dependencies_script: pub get

  matrix:
    - name: Linux Test
      container:
        image: google/dart

      env:
        CODECOV_TOKEN: ENCRYPTED[ada9e1997c334439f9fca2a85bc1ebc641a2def20871fc0d79acf92c4ed4aeae1fd4aafffc63798f93252136b70eda6a]

      test_script: pub run test
      coverage_script: bash tool/coverage.sh
